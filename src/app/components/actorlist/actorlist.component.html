<div>
  <h3>Actor List</h3>
  <table #myTable mat-table [dataSource]="dataSource" class="mat-elevation-z8">

    <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let actor; let index = index">
        <span *ngIf="index !== selectedIndex">{{actor.name}}</span>
        <span *ngIf="index === selectedIndex">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="Actor Name" name="actorName" [(ngModel)]="actor.name">
          </mat-form-field>
        </span>
      </td>
    </ng-container>

    <!-- City Column -->
    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef> City </th>
      <td mat-cell *matCellDef="let actor; let index = index">
        <span *ngIf="index !== selectedIndex">{{actor.city}}</span>
        <span *ngIf="index === selectedIndex">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="City" name="actorCity" [(ngModel)]="actor.city">
          </mat-form-field>
        </span>
      </td>
    </ng-container>

    <!-- Rating Column -->
    <ng-container matColumnDef="rating">
      <th mat-header-cell *matHeaderCellDef> Rating </th>
      <td mat-cell *matCellDef="let actor; let index = index">
        <span *ngIf="index !== selectedIndex">{{actor.rating}}</span>
        <span *ngIf="index === selectedIndex">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="Rating" name="actorRating" [(ngModel)]="actor.rating">
          </mat-form-field>
        </span>
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let index = index">
        <span *ngIf="index !== selectedIndex">
          <button mat-icon-button aria-label="Example icon-button with a heart icon" (click)="editActor(index)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button aria-label="Example icon-button with a heart icon" (click)="deleteActor(index)">
            <mat-icon>delete_forever</mat-icon>
          </button>
        </span>
        <span *ngIf="index === selectedIndex">
          <button mat-icon-button aria-label="Example icon-button with a heart icon" (click)="saveActor(index)">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button aria-label="Example icon-button with a heart icon" (click)="cancelEdit(index)">
            <mat-icon>undo</mat-icon>
          </button>
        </span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; let index = index; columns: displayedColumns;"
      (dblclick)="editActor(index)"
      (keyup)="handleKey($event, index)"></tr>
  </table>
  <div>
    <mat-card>
      <mat-card-title>Add Actor Form</mat-card-title>
      <mat-card-content>
        <form class="example-form">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="Actor Name" name="name" #name>
          </mat-form-field>

          <mat-form-field class="example-full-width">
            <input matInput placeholder="City" name="city" #city>
          </mat-form-field>

          <mat-form-field class="example-full-width">
            <input matInput placeholder="Rating" name="rating" #rating>
          </mat-form-field>

        </form>
      </mat-card-content>
      <mat-card-actions>
        <button class="mat-raised-button" color="primary"
          (click)="addActor(name.value, city.value, rating.value); name.value = city.value = rating.value = null">
          <mat-icon>person_add</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

</div>
